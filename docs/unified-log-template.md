# 统一日志格式模板

## 黄金标准（基于 TPS）

### 日志结构
```typescript
interface LogEntry {
  timestamp: string;  // ISO 时间戳
  message: string;    // 日志内容
}
```

### 分隔符样式
```
═══════════════════════════════════════════════════  // 主分隔符（51个═）
──────────────────────────────────                   // 次分隔符（30个─）
```

### 图标规范
| 图标 | 用途 |
|------|------|
| 🌸 | 任务启动（各系统可自定义：🌸TPS / 🔍SPF / 🎯Anywho / 🚀LinkedIn）|
| 📋 | 配置信息 |
| 💰 | 费用相关 |
| 🧵 | 并发配置 |
| 📊 | 统计信息 |
| 🎉 | 任务完成 |
| ✅ | 成功 |
| ❌ | 失败 |
| 💡 | 提示 |
| 📈 | 效率分析 |

### 日志阶段模板

#### 1. 任务启动
```
═══════════════════════════════════════════════════
🌸 开始 [系统名称] 搜索
═══════════════════════════════════════════════════
```

#### 2. 搜索配置
```
📋 搜索配置:
   • 搜索模式: [模式名称]
   • 搜索姓名: [姓名列表]
   • 搜索地点: [地点列表]（如有）
   • 搜索组合: [N] 个任务
```

#### 3. 过滤条件
```
📋 过滤条件:
   • 年龄范围: [min] - [max] 岁
   • [其他过滤条件...]
```

#### 4. 费用预估
```
💰 费用预估 (最大值):
   • 搜索页费用: 最多 [N] 页 × [cost] = [total] 积分
   • 详情页费用: 预估 ~[N] 页 × [cost] = [total] 积分
   • 预估总费用: ~[total] 积分 (实际费用取决于搜索结果)
   💡 提示: 缓存命中的详情不收费，可节省大量积分
```

#### 5. 并发配置
```
═══════════════════════════════════════════════════
🧵 并发配置: 搜索 [N] 任务并发 / 详情 [N] 并发
```

#### 6. 搜索阶段
```
📋 阶段一：并发搜索 ([N] 任务并发 × [N]页并发)...
✅ [1/N] [任务名称] - [N] 条结果, [N] 页, 过滤 [N] 条
❌ [2/N] 搜索失败: [错误信息]
```

#### 7. 搜索阶段完成
```
════════ 搜索阶段完成 ════════
📊 搜索页请求: [N] 页
📊 待获取详情: [N] 条
📊 年龄预过滤: [N] 条被排除
📊 排除已故: [N] 条 (Deceased)（如有）
```

#### 8. 预扣积分
```
💰 预扣积分: [N] 积分
💰 当前预估: [N] 积分（搜索页 [N] + 详情页 [N]）
✅ 积分已预扣，任务将完整执行
```

#### 9. 详情阶段
```
📋 阶段二：统一队列获取详情（[N] 并发）...
🔗 去重后 [N] 个唯一详情链接
```

#### 10. 详情阶段完成
```
════════ 详情阶段完成 ════════
📊 详情页请求: [N] 页
📊 缓存命中: [N] 条
📊 详情过滤: [N] 条被排除
📊 有效结果: [N] 条
```

#### 11. 任务完成
```
═══════════════════════════════════════════════════
🎉 任务完成!
═══════════════════════════════════════════════════

📊 搜索结果摘要:
   • 有效结果: [N] 条联系人信息
   • 缓存命中: [N] 条 (免费获取)
   • 过滤排除: [N] 条 (不符合筛选条件)
   • 排除已故: [N] 条 (Deceased)（如有）

💰 费用明细:
   • 搜索页费用: [N] 页 × [cost] = [total] 积分
   • 详情页费用: [N] 页 × [cost] = [total] 积分
   • 缓存节省: [N] 条 × [cost] = [total] 积分
   ──────────────────────────────
   • 预扣积分: [N] 积分
   • 实际消耗: [N] 积分
   • ✅ 已退还: [N] 积分（如有）
   • 当前余额: [N] 积分

📈 费用效率:
   • 每条结果成本: [N] 积分
   • 缓存命中率: [N]%
   • 缓存节省: [N] 积分 (相当于 [N]% 的实际费用)

═══════════════════════════════════════════════════
💡 提示: 相同姓名/地点的后续搜索将命中缓存，节省更多积分
═══════════════════════════════════════════════════
```

#### 12. 任务失败
```
❌ 搜索任务失败: [错误信息]
```

## 各系统特定图标

| 系统 | 启动图标 | 说明 |
|------|----------|------|
| TPS | 🌸 | 樱花（TruePeopleSearch）|
| SPF | 🔍 | 放大镜（SearchPeopleFree）|
| Anywho | 🎯 | 靶心（精准定位）|
| LinkedIn | 🚀 | 火箭（专业人士）|

## 注意事项

1. **不要使用方括号前缀**：如 `[搜索]`、`[配置]`、`[费用]`，改用图标
2. **统一缩进**：使用 3 个空格 + `• ` 作为列表项
3. **统一分隔符**：主分隔符 51 个 `═`，次分隔符 30 个 `─`
4. **保持一致性**：所有系统使用相同的日志结构和格式
